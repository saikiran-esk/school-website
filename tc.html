<!doctype html>
<html>
<head><meta charset="utf-8"><title>TC</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>
</head>
<body>
  <h2>Transfer Certificate</h2>
  <input id="studentId" placeholder="Admission doc id"><button id="loadTc">Load</button>
  <div id="tcArea" style="border:1px solid #000;padding:20px;margin-top:12px;display:none">
    <h3 id="tcName"></h3>
    <p>Class: <span id="tcClass"></span></p>
    <p>Date of leaving: <span id="tcDol"></span></p>
    <div style="margin-top:40px">Principal signature: ____________________</div>
    <button id="printTc">Print</button>
  </div>

  <script>
    document.getElementById('loadTc').onclick = async () => {
      const id = document.getElementById('studentId').value.trim();
      if (!id) return alert('id');
      const doc = await db.collection('admissions').doc(id).get();
      if (!doc.exists) return alert('not found');
      const d = doc.data();
      document.getElementById('tcArea').style.display = 'block';
      document.getElementById('tcName').textContent = d.name || '';
      document.getElementById('tcClass').textContent = d.sclass || '';
      document.getElementById('tcDol').textContent = new Date().toLocaleDateString();
    };
    document.getElementById('printTc').onclick = ()=>window.print();
  </script>
</body>
</html>
